$(function(){im.init()});var im={winHei:parseInt($("#winHei").height()),state:!0,init:function(){var t=this;t.setWinHei();var n=["bg.jpg","music.png","off.png","on.png","GIC.png","loading/moon.png","loading/moon_bg.png","loading/ld0.png","loading/ld20.png","loading/ld40.png","loading/ld60.png","loading/ld80.png","loading/ld100.png","loading/Christmas.png","loading/deer.png"],a=["loading/year2015.png","loading/tipsList/Bell1.png","loading/tipsList/Bell2.png","loading/tipsList/Bell3.png","loading/tipsList/candy.png","loading/tipsList/club.png","loading/tipsList/leaf.png","loading/tipsList/snowflake_g.png","loading/tipsList/snowflake_r.png","loading/tipsList/snowman.png","loading/tipsList/sock.png","loading/tipsList/star_b.png","loading/tipsList/star_g.png","loading/tipsList/star_r.png","loading/tipsList/star_g_bg.png","loading/tipsList/star_r_bg.png","logo.png","bg_tips1.png","bg_tips2.png","bg_tips3.png","bg_tips4.png","close.png","share2.png","photoFrame.png","v2/downTips.png","v2/foodBg.png","v2/grdh.png","v2/menuBg.png","v2/menuBtn.png","v2/programBtn.png","v2/txtBg.jpg","v2/window.png","v2/wjtx.png","v2/curtain/curtain1_l.png","v2/curtain/curtain1_r.png","v2/curtain/curtain2_l.png","v2/curtain/curtain2_r.png","v2/programMenu.png","v2/food/food1.png","v2/food/food2.png","v2/food/food3.png","v2/food/food4.png","v2/food/food5.png","v2/food/food6.png","v2/food/food7.png","v2/food/chicken.png","v2/food/tablecloth.png"];t.loadingImg("img/",[n,a]),t.doMusics().doAll(),t.doPlay(),t.doPage(),t.doFoodPage()},setWinHei:function(){var t=this;$(".setWinHei,.column").css("height",t.winHei+"px")},doPage:function(){setTimeout(function(){new Swiper(".swiper-container",{direction:"vertical",speed:300})},3e3)},doFoodPage:function(){new Swiper(".swiperBox",{direction:"horizontal",loop:!0,autoplay:3e3,speed:2e3,autoplayDisableOnInteraction:!1,pagination:".swiper-pagination"})},doMusics:function(){var t=this,n=null,a=document.getElementById("closeMusic"),o=document.getElementById("audioBg"),s=document.getElementById("audioBtn"),i=document.getElementById("audioPop"),e=document.getElementById("audioPull"),d=document.getElementById("audioFoodIn"),l={doAll:function(){var n=this;$(a).on("touchstart",function(){var a=$(this);a.addClass("doAnimate"),n.doBtn();var s=$(this).attr("datas");1==s?(t.state=!1,a.attr("datas",0),$(".switch").addClass("off"),$(o).attr("src","")):(t.state=!0,a.attr("datas",1),$(".switch").removeClass("off"),$(o).attr("src","music/bg.mp3")),setTimeout(function(){a.removeClass("doAnimate")},500)})},doBg:function(){n=setTimeout(function(){clearTimeout(n);try{o=document.getElementById("audioBg"),o.play()}catch(t){}},2e3)},doBtn:function(){t.state&&(s.play(),this.doBg())},doPop:function(){t.state&&(i.play(),this.doBg())},doPull:function(){t.state&&(e.play(),this.doBg())},doFoodIn:function(){t.state&&(d.play(),this.doBg())}};return l},loadingImg:function(t,n){function a(n){i=0,s=!1;for(var a=n.length,o=new Image,e=0;a>e;e++)o=new Image,o.src=t+n[e],o.onload=function(){i++,i>=a&&(s=!0)}}function o(){function t(t){if(t>=100){n.attr("class","plan pc100"),$("#load .tipsList").addClass("loadShow");var a=setInterval(function(){s&&(clearInterval(a),$(".loadingBox").fadeOut(500,function(){$(".play").addClass("animateOk"),$("#share2").show(),setTimeout(function(){$(".logo").addClass("bounce")},3e3)}))},1e3)}else t>=80?(n.attr("class","plan pc80"),$("#load .BellList").addClass("loadShow")):t>=60?(n.attr("class","plan pc60"),$("#load .year2015").addClass("loadShow"),o=1e3):t>=40?(n.attr("class","plan pc40"),$("#load .Christmas").addClass("loadShow")):t>=20?(n.addClass("pc20"),$("#load .deer").addClass("loadShow")):($("#load .moon").addClass("loadShow"),n.attr("class","plan"))}var n=$("#plan"),a=0,o=2e3;t(a);var i=setInterval(function(){a+=20,t(a),a>=100&&clearInterval(i)},o)}var s=(n[0].length,n[1].length,!1),i=0;!function(){a(n[0]);var t=setInterval(function(){s&&(clearInterval(t),a(n[1]),o())},60)}()},doPlay:function(){var t=this,n=0,a=$("#menuBtn .menuBtn"),o=$("#menuBtn .programBtn"),s=$(".state2"),i=$(".state3"),e=$("#curtainLeft"),d=$("#curtainRight"),l=$("#share2");$(".menuClose").on("touchstart",function(){var n=$(this);l.fadeIn(),n.closest(".menuBox").removeClass("showMenu"),t.doMusics().doBtn();try{a.attr("datas",1),o.attr("datas",1),e.removeClass("curtainLeft2"),d.removeClass("curtainRight2")}catch(s){}}),o.on("touchstart",function(){var n=$(this),o=n.attr("datas");1==o&&(l.fadeOut(),n.attr("datas",0),a.attr("datas",1),t.doMusics().doBtn(),n.addClass("rotateY"),setTimeout(function(){n.removeClass("rotateY"),t.doMusics().doPop()},1e3),setTimeout(function(){e.addClass("curtainLeft2"),d.addClass("curtainRight2"),t.doMusics().doPull()},2e3),i.removeClass("showMenu"),s.addClass("showMenu"))}),a.on("click",function(){var a=$(this),e=a.attr("datas");if(1==e){l.fadeOut(),a.attr("datas",0),o.attr("datas",1),t.doMusics().doBtn(),a.addClass("rotateY"),setTimeout(function(){a.removeClass("rotateY"),t.doMusics().doPop()},800);var d=setInterval(function(){n++,t.doMusics().doFoodIn(),n>=6&&(n=0,clearInterval(d))},1e3);s.removeClass("showMenu"),i.addClass("showMenu")}})},shareFN:function(){$("#share,#share2").on("touchstart",function(){var t='<div id="shareTipsBox"><div class="tipsImg"></div><div class="clBox"></div></div>';$("body").append(t),$("#shareTipsBox").on("touchstart",function(){$(this).remove()})})}};