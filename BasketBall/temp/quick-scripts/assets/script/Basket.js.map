{"version":3,"sources":["Basket.js"],"names":["cc","Class","extends","Component","properties","line","Node","left","right","linePre","Prefab","count","Label","backetMove","p","moveTimes","init","game","state","_createMaskLine","_doMoveAnim","startMove","stopMove","node","stopAllActions","_resetPosition","setPositionX","self","moveRight","moveBy","x","moveLeft","y","repeat","repeatForever","sequence","runAction","linePreNode","instantiate","addChild","switchMaskLineShow","flag","setLocalZOrder","playNetAnim","scaleLong","scaleTo","scaleShort","scaleNomal","anim","getChildByName","update","dt","worldPot","convertToWorldSpaceAR","getPosition","nodePot","parent","convertToNodeSpaceAR","setPosition"],"mappings":"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","file":"Basket.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        line: cc.Node,\n        left: cc.Node,\n        right: cc.Node,\n        linePre: cc.Prefab,\n        count: cc.Label,\n        backetMove:cc.p(0,0),\n        //篮筐移动的时间\n        moveTimes:0\n    },\n    \n    init: function (game) {\n        this.game = game;\n        this.state = false;\n        this._createMaskLine();\n        //不使用定时控制\n        this._doMoveAnim();\n        \n    },\n\n    startMove: function(){\n        this._doMoveAnim();\n    },\n\n    stopMove: function(){\n        this.node.stopAllActions();\n        this._resetPosition();\n    },\n\n    _resetPosition: function(){\n        this.node.setPositionX(0);\n    },\n    \n    // 篮筐移动动画\n    _doMoveAnim: function(){\n        var self = this;\n        var moveRight = cc.moveBy(self.moveTimes, cc.p(self.backetMove.x, 0));\n        var moveLeft = cc.moveBy(self.moveTimes, cc.p(self.backetMove.y, 0));\n        \n        var repeat = cc.repeatForever(cc.sequence(moveRight, moveLeft, moveLeft, moveRight));\n        this.node.runAction(repeat);\n    },\n    \n    // 创建篮筐遮罩\n    _createMaskLine: function(){\n        this.linePreNode = cc.instantiate(this.linePre);\n        this.game.node.addChild(this.linePreNode);\n        this.state = true;\n        \n        // 修改遮罩位置，先进行坐标转换        \n        /*var worldPot = this.node.convertToWorldSpaceAR(this.line.getPosition());\n        var nodePot = this.node.parent.convertToNodeSpaceAR(worldPot);\n        //设置栏网的位置\n        this.linePreNode.setPosition(cc.p(this.node.x-3, nodePot.y));*/\n    },\n    \n    // 切换篮筐遮罩层级\n    switchMaskLineShow: function(flag){\n        if(flag){\n            this.linePreNode.setLocalZOrder(100);\n        }else{\n            this.linePreNode.setLocalZOrder(1);\n        }\n    },\n\n    // 球网动画\n    playNetAnim: function(){\n        if(this.linePreNode){\n            var scaleLong = cc.scaleTo(0.1, 1, 1.1);\n            var scaleShort = cc.scaleTo(0.3, 1, 0.9);\n            var scaleNomal = cc.scaleTo(0.2, 1, 1);\n\n            var anim = cc.sequence(scaleLong,scaleShort,scaleNomal);\n            this.linePreNode.getChildByName('net').runAction(anim);\n        }\n    },\n    //篮筐在位移的时候才执行定位\n    update: function (dt) {\n        if(this.line){\n\n        }\n        // 修改遮罩位置，先进行坐标转换        \n        var worldPot = this.node.convertToWorldSpaceAR(this.line.getPosition());\n        var nodePot = this.node.parent.parent.convertToNodeSpaceAR(worldPot);\n        //设置栏网的位置\n        //this.linePreNode.setPosition(cc.p(this.node.x-3, nodePot.y));\n        //在元素创建成功的情况下\n        if(!this.state){return false};\n        this.linePreNode.setPosition(cc.p(this.node.x-3, nodePot.y));\n        \n    },\n});\n"]}