{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\TimeManager.js"],"names":["Global","require","cc","Class","extends","Component","properties","proBar","ProgressBar","maxTime","timeToMove","addtime","init","game","time","residueTime","isTimeToMove","counting","addTime","update","dt","W_GAME_STATE","R_GAME_STATE","DEAD","toFixed","progress","text","length","basket","count","string","replace","gameOver"],"mappings":";;;;;;AAAA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAOL,GAAGM,WADF;AAER;AACAC,iBAAS,CAHD;AAIR;AACAC,oBAAY,CALJ;AAMRC,iBAAQ;AANA,KAHP;;AAYLC,UAAM,cAAUC,IAAV,EAAgB;AAClB,aAAKA,IAAL,GAAYA,IAAZ;AACA,aAAKC,IAAL,GAAY,KAAKL,OAAjB;AACA,aAAKM,WAAL,GAAmB,CAAnB;AACA,aAAKC,YAAL,GAAoB,KAApB;AACA,aAAKC,QAAL,GAAgB,IAAhB;AACH,KAlBI;AAmBT;;;;;;;;;;;;;;;;;;AAkBIC,aAAQ,mBAAU;AACd,aAAKJ,IAAL,IAAa,KAAKH,OAAlB;AACA,YAAG,KAAKG,IAAL,GAAU,KAAKL,OAAlB,EAA0B;AACtB,iBAAKK,IAAL,GAAY,KAAKL,OAAjB;AACH;AACJ,KA1CI;AA2CL;AACAU,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAGpB,OAAOqB,YAAP,IAAuBrB,OAAOsB,YAAP,CAAoBC,IAA9C,EAAmD;AAC/C,mBAAO,KAAP;AACH;AACD,aAAKT,IAAL,IAAaM,EAAb;AACA,aAAKL,WAAL,GAAmB,CAAC,KAAKD,IAAL,GAAU,KAAKL,OAAhB,EAAyBe,OAAzB,CAAiC,CAAjC,CAAnB;AACA;AACA;;;;;AAKA,aAAKjB,MAAL,CAAYkB,QAAZ,GAAuB,KAAKV,WAA5B;AACA,YAAIW,OAAO,KAAKZ,IAAL,CAAUU,OAAV,CAAkB,CAAlB,CAAX;AACA,YAAGE,KAAKC,MAAL,KAAgB,CAAnB,EAAqB;AACjBD,mBAAO,MAAIA,IAAX;AACH;AACD,aAAKb,IAAL,CAAUe,MAAV,CAAiBC,KAAjB,CAAuBC,MAAvB,GAAgCJ,KAAKK,OAAL,CAAa,GAAb,EAAkB,IAAlB,CAAhC;;AAEA,YAAG,KAAKhB,WAAL,IAAkB,CAArB,EAAuB;AACnBf,mBAAOqB,YAAP,GAAsBrB,OAAOsB,YAAP,CAAoBC,IAA1C;AACA,iBAAKV,IAAL,CAAUmB,QAAV;AACH;AACJ;AAnEI,CAAT","file":"TimeManager.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["var Global = require('Global');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        proBar:cc.ProgressBar,\n        //游戏计时\n        maxTime: 0,\n        //篮筐计时后几秒开始移动\n        timeToMove: 0,\n        addtime:0,\n    },\n\n    init: function (game) {\n        this.game = game;\n        this.time = this.maxTime;\n        this.residueTime = 1;\n        this.isTimeToMove = false;\n        this.counting = true;\n    },\n/*\n    _callback: function(){\n        this.counting = false;\n        this.game.basket.count.string = '00  00';\n        this.game.stopMoveBasket();\n        this.game.gameOver();\n    },\n\n    stopCounting: function () {\n        this.unschedule(this._callback);\n        this.time = this.maxTime;\n    },\n\n    oneSchedule: function () {\n        this.stopCounting();\n        this.scheduleOnce(this._callback, this.maxTime);\n        this.counting = true;\n    },*/\n    addTime:function(){\n        this.time += this.addtime;\n        if(this.time>this.maxTime){\n            this.time = this.maxTime;\n        }\n    },\n    // called every frame\n    update: function (dt) {\n        if(Global.W_GAME_STATE == Global.R_GAME_STATE.DEAD){\n            return false;\n        };\n        this.time -= dt;\n        this.residueTime = (this.time/this.maxTime).toFixed(2);\n        //判断时间 控制篮筐移动\n        /*if(this.maxTime - this.timeToMove >= this.time && !this.isTimeToMove){\n            this.isTimeToMove = true;\n            cc.log(\"移动了！\");\n            this.game.startMoveBasket();\n        }*/\n        this.proBar.progress = this.residueTime;\n        let text = this.time.toFixed(2);\n        if(text.length === 4){\n            text = '0'+text;\n        }\n        this.game.basket.count.string = text.replace('.', '  ');\n        \n        if(this.residueTime<=0){\n            Global.W_GAME_STATE = Global.R_GAME_STATE.DEAD;\n            this.game.gameOver();\n        };\n    },\n});\n"]}